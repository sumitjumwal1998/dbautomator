---
# backup and restore Tasks
  - name: Backup Database
    hosts: DEV_SQL
    gather_facts: no

    vars:
      sa_username: "{{ username }}"
      sa_password: "{{ password }}"
      source_DB_name: "{{ DatabaseName }}"
      backup_path: 'c:\backup\'
        
    tasks:
       - name: DB Backup
         win_shell: |
          $Backup = "BACKUP DATABASE {{ source_DB_name }} TO DISK ='{{ backup_path }} {{ source_DB_name }}-full.bak'"
          Invoke-SqlCmd -U {{ sa_username }} -P {{ sa_password }} -Query $Backup
